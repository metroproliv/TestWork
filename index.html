<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>LMS Platform Architecture</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <script defer src="/js/main.js"></script>
    <meta name="description" content="–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ LMS-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥—Ä–∞–º–º–∞ PlantUML.">
    <meta name="color-scheme" content="light dark">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üìö</text></svg>">
    <style>
        /* –ö–æ—Ä–æ—Ç–∫–∏–π –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–∏–ª—å (–æ—Å—Ç–∞–ª—å–Ω–æ–µ –≤ css/style.css) */
        body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--fg)}
        :root{--bg:#0b1020;--panel:#0f162e;--fg:#eef2ff;--muted:#94a3b8;--accent:#7c3aed;--accent-2:#22d3ee}
        @media (prefers-color-scheme: light){:root{--bg:#ffffff;--panel:#f6f7fb;--fg:#0b1020;--muted:#475569;--accent:#6d28d9;--accent-2:#0891b2}}
        .container{max-width:1100px;margin:0 auto;padding:24px}
        header{position:sticky;top:0;background:rgba(15,22,46,.6);backdrop-filter:blur(8px);border-bottom:1px solid rgba(124,58,237,.25);z-index:10}
        nav{display:flex;align-items:center;justify-content:space-between;gap:16px}
        nav .brand{display:flex;align-items:center;gap:10px;font-weight:700}
        nav a{color:var(--fg);text-decoration:none}
        .layout{display:grid;gap:16px;grid-template-columns:1fr}
        .hero{padding:48px 0}
        .hero h1{font-size:36px;margin:0 0 8px}
        .hero p{color:var(--muted);margin:0}
        .panel{background:var(--panel);border:1px solid rgba(124,58,237,.25);border-radius:16px;padding:20px}
        h2{margin:0 0 12px}
        .two-col{display:grid;grid-template-columns:1fr 1fr;gap:16px}
        @media (max-width:1200px){.two-col{grid-template-columns:1fr}}
        table{width:100%;border-collapse:collapse}
        th,td{padding:10px;border-bottom:1px dashed rgba(124,58,237,.25);text-align:left}
        code{background:rgba(124,58,237,.12);padding:2px 6px;border-radius:6px}
        footer{color:var(--muted);padding:24px 0}
        /* –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥-–±–ª–æ–∫–∞–º–∏ —Å–æ—Å–µ–¥–Ω–∏—Ö —Å–µ–∫—Ü–∏–π */
        .panel{overflow:hidden}
        pre code{display:block;max-width:100%}
        pre{overflow:auto;border-radius:12px}
        .badge{display:inline-block;background:linear-gradient(135deg,var(--accent),var(--accent-2));color:white;padding:2px 10px;border-radius:999px;font-size:12px}
        .diagram{min-height:220px;display:flex;align-items:center;justify-content:center}
        .codegrid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
        @media (max-width:1200px){.codegrid{grid-template-columns:1fr}}
        pre{margin:0}
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1/plugins/autoloader/prism-autoloader.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prism-themes@1/themes/prism-one-dark.css">
    <script>Prism.plugins.autoloader.languages_path='https://cdn.jsdelivr.net/npm/prismjs@1/components/';</script>
    <meta name="robots" content="index,follow">
    <meta name="theme-color" content="#7c3aed">
  </head>
  <body>
    <header>
      <div class="container">
        <nav>
          <a class="brand" href="#"><span style="font-size:22px">üìö</span> LMS Platform Architecture</a>
          <ul>
            <li><a href="#diagram">–î–∏–∞–≥—Ä–∞–º–º–∞</a></li>
            <li><a href="#components">–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</a></li>
            <li><a href="#flows">–ü–æ—Ç–æ–∫–∏</a></li>
            <li><a href="#code">–ö–æ–¥</a></li>
            <li><a target="_blank" href="/puml/architecture.puml">PlantUML</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="container layout">
      <section class="hero panel">
        <span class="badge">AWS ¬∑ Firebase ¬∑ Laravel ¬∑ Quasar</span>
        <h1>–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ LMS‚Äë–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</h1>
        <p>–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (Web, Android, iOS), Laravel‚Äë–±—ç–∫–µ–Ω–¥, —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ AWS, FCM, –∏ —Å—Ç–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å Sentry, CloudWatch, Grafana.</p>
      </section>

      <section id="diagram" class="panel">
        <h2>–°—Ö–µ–º–∞ (PlantUML)</h2>
        <p class="muted">–§–∞–π–ª —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ —á–µ—Ä–µ–∑ Kroki. –ò—Å—Ç–æ—á–Ω–∏–∫: <code>puml/architecture.puml</code>.</p>
        <div id="diagram-container" class="diagram">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã‚Ä¶</div>
      </section>

      <section id="components" class="two-col">
        <div class="panel">
          <h2>–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å</h2>
          <table>
            <thead>
              <tr><th>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</th><th>–§—Ä–µ–π–º–≤–æ—Ä–∫</th><th>–Ø–∑—ã–∫</th></tr>
            </thead>
            <tbody>
              <tr><td>Desktop / Browser</td><td>Quasar Framework</td><td>TypeScript</td></tr>
              <tr><td>Android</td><td>Native</td><td>Kotlin</td></tr>
              <tr><td>iOS</td><td>Native</td><td>Swift</td></tr>
            </tbody>
          </table>
        </div>
        <div class="panel">
          <h2>–°–µ—Ä–≤–µ—Ä–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å</h2>
          <ul>
            <li><strong>LMS Backend API</strong> ‚Äî Laravel (PHP)</li>
            <li><strong>Amazon RDS MySQL</strong> ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î</li>
            <li><strong>Amazon DynamoDB</strong> ‚Äî –∫—ç—à –∏ —Å–µ—Å—Å–∏–∏</li>
            <li><strong>Amazon S3</strong> ‚Äî —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ</li>
            <li><strong>Firebase Cloud Messaging</strong> ‚Äî push‚Äë—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</li>
          </ul>
        </div>
      </section>

      <section class="two-col" id="flows">
        <div class="panel">
          <h2>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>
          <ul>
            <li>Firebase & Google Analytics ‚Äî –ø—Ä–æ–¥—É–∫—Ç–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –ø–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å</li>
            <li>BigQuery ‚Äî ad‚Äëhoc SQL‚Äë–∞–Ω–∞–ª–∏–∑</li>
            <li>Amazon CloudWatch ‚Äî –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –ª–æ–≥–∏</li>
            <li>Sentry ‚Äî error tracking</li>
            <li>Grafana ‚Äî –¥–∞—à–±–æ—Ä–¥—ã</li>
            <li>Slack ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</li>
          </ul>
        </div>
        <div class="panel">
          <h2>–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö</h2>
          <ol>
            <li><strong>–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</strong>: –ö–ª–∏–µ–Ω—Ç ‚Üí API ‚Üí MySQL</li>
            <li><strong>–ö–æ–Ω—Ç–µ–Ω—Ç</strong>: –ö–ª–∏–µ–Ω—Ç ‚Üí API ‚Üí S3</li>
            <li><strong>–ö—ç—à</strong>: API ‚Üî DynamoDB</li>
            <li><strong>Push</strong>: API ‚Üí FCM ‚Üí –∫–ª–∏–µ–Ω—Ç—ã</li>
            <li><strong>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</strong>: API/–ö–ª–∏–µ–Ω—Ç—ã ‚Üí Sentry/CloudWatch ‚Üí Grafana ‚Üí Slack</li>
          </ol>
        </div>
      </section>

      <section id="code" class="panel">
        <h2>–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞</h2>
        <div class="codegrid">
          <article>
            <h3>TypeScript ¬∑ Quasar</h3>
            <pre><code class="language-ts">import { api } from 'boot/axios'

async function fetchCourses(): Promise&lt;Array&lt;{ id: number; title: string }&gt;&gt; {
  const { data } = await api.get('/courses')
  return data
}

export async function sendPushToken(token: string): Promise&lt;void&gt; {
  await api.post('/devices', { token })
}</code></pre>
          </article>

          <article>
            <h3>PHP ¬∑ Laravel API</h3>
            <pre><code class="language-php">&lt;?php
use Illuminate\Support\Facades\Cache;
use Illuminate\Support\Facades\Storage;

Route::get('/courses', function () {
    return Cache::remember('courses', 60, fn() => Course::query()
        ->select(['id','title'])
        ->orderBy('title')
        ->get());
});

Route::post('/devices', function (Request $request) {
    // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å FCM‚Äë—Ç–æ–∫–µ–Ω —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    Device::updateOrCreate(
        ['token' => $request->string('token')],
        ['platform' => $request->string('platform', 'web')]
    );
    return response()->noContent();
});</code></pre>
          </article>

          <article>
            <h3>Swift ¬∑ iOS</h3>
            <pre><code class="language-swift">import UserNotifications

func registerForPush(_ application: UIApplication) {
  UNUserNotificationCenter.current().requestAuthorization(options: [.alert, .badge, .sound]) { granted, _ in
    if granted { DispatchQueue.main.async { application.registerForRemoteNotifications() } }
  }
}</code></pre>
          </article>

          <article>
            <h3>Kotlin ¬∑ Android</h3>
            <pre><code class="language-kotlin">class MyFirebaseService : FirebaseMessagingService() {
  override fun onNewToken(token: String) {
    // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–∫–µ–Ω–∞ –≤ API
    Api.post("/devices", mapOf("token" to token))
  }
}</code></pre>
          </article>
        </div>
      </section>

      <footer>
        <p>¬© 2025 LMS Platform. –î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å –ø–æ–º–æ—â—å—é Kroki/PlantUML. –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.</p>
      </footer>
    </main>
  </body>
</html>